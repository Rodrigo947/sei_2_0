// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Unidade {
  id          String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome        String  @db.VarChar(255)
  sigla       String  @unique @db.VarChar(255)
  cep         String  @db.VarChar(8)
  logradouro  String  @db.VarChar(30)
  numero      String  @db.VarChar(50)
  complemento String? @db.VarChar(50)
  bairro      String  @db.VarChar(255)
  cidade      String  @db.VarChar(255)
  uf          String  @db.VarChar(2)
  telefone    String  @db.VarChar(30)

  @@map("unidade")
}

model Usuario {
  id              String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome            String      @db.VarChar(255)
  sobrenome       String      @db.VarChar(255)
  cpf             String      @unique @db.VarChar(11)
  senha           String      @db.VarChar(255)
  rg              String      @unique @db.VarChar(8)
  orgao_expeditor String      @db.VarChar(30)
  telefone        String      @db.VarChar(30)
  cep             String      @db.VarChar(8)
  logradouro      String      @db.VarChar(30)
  numero          String      @db.VarChar(50)
  complemento     String?     @db.VarChar(50)
  bairro          String      @db.VarChar(255)
  cidade          String      @db.VarChar(255)
  uf              String      @db.VarChar(2)
  Documento       Documento[]

  @@map("usuario")
}

enum NivelAcesso {
  SIGILOSO
  RESTRITO
  PUBLICO
}

model Processo {
  id               String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  protocolo        Int         @unique @default(autoincrement())
  id_tipo_processo String      @db.Uuid
  especificacao    String      @db.VarChar(255)
  nivel_acesso     NivelAcesso
  concluido        Boolean     @default(false)

  tipo_processo TipoProcesso @relation(fields: [id_tipo_processo], references: [id])

  @@map("processo")
}

enum Grupo {
  PESSOAL
  GESTAO
}

model TipoProcesso {
  id       String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome     String     @db.VarChar(255)
  grupo    Grupo
  Processo Processo[]

  @@map("tipo_processo")
}

model Documento {
  id                 String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome_arquivo       String      @db.VarChar(255)
  observacao         String      @db.VarChar(255)
  id_tipo_documento  String      @db.Uuid
  nivel_de_acesso    NivelAcesso
  id_usuario_criador String      @db.Uuid

  usuario_criador Usuario       @relation(fields: [id_usuario_criador], references: [id])
  tipo_documento  TipoDocumento @relation(fields: [id_tipo_documento], references: [id])

  @@map("documento")
}

model TipoDocumento {
  id        String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nome      String      @db.VarChar(255)
  Documento Documento[]

  @@map("tipo_documento")
}
